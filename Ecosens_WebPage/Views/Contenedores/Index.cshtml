@model ContenedoresViewModel
@{
    Layout = "~/Views/Shared/_ControlPanelLayout.cshtml";

    string Estado(string estado)
    {
        if (estado == "Lleno")
            return "height: 100%;";
        if (estado == "Parcialmente Lleno")
            return "height: 75%;";
        if (estado == "Medio")
            return "height: 50%;";
        if (estado == "Parcialmente Vacio")
            return "height: 25%;";
        if (estado == "Parcialmente Vacio")
            return "height: 25%;";
        else
            return "height: 0%;";

    }
}

<div class="container py-5 d-flex flex-column vh-100">
    <div class="text-center mb-4">
        <p class="fw-bold fs-4">Sistema de Monitoreo de Contenedores</p>
    </div>
    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-4 g-3 mb-4">
        <div class="col">
            <div class="cards rounded-3 border-start border-5 border-primary shadow-sm h-100">
                <div class="d-flex justify-content-between align-items-center">
                    <p class="text-primary mb-0">PET (kg)</p>
                    <span class="material-icons-outlined fs-2 text-primary">recycling</span>
                </div>
                <span class="fw-bold text-primary fs-5">@Model.TotalPlastico</span>
            </div>
        </div>
        <div class="col">
            <div class="cards rounded-3 border-start border-5 border-warning shadow-sm h-100">
                <div class="d-flex justify-content-between align-items-center">
                    <p class="text-primary mb-0">Metal (kg)</p>
                    <span class="material-icons-outlined fs-2 text-warning">recycling</span>
                </div>
                <span class="fw-bold text-primary fs-5">@Model.TotalMetal</span>
            </div>
        </div>
        <div class="col">
            <div class="cards rounded-3 border-start border-5 border-success shadow-sm h-100">
                <div class="d-flex justify-content-between align-items-center">
                    <p class="text-primary mb-0">Total (kg)</p>
                    <span class="material-icons-outlined fs-2 text-success">recycling</span>
                </div>
                <span class="fw-bold text-primary fs-5">@Model.Total</span>
            </div>
        </div>
        <div class="col">
            <div class="cards rounded-3 border-start border-5 border-danger shadow-sm h-100">
                <div class="d-flex justify-content-between align-items-center">
                    <p class="text-primary mb-0">Alertas (hoy)</p>
                    <span class="material-icons-outlined fs-2 text-danger">notification_important</span>
                </div>
                <span class="fw-bold text-primary fs-5">@Model.TotalNotificaciones</span>
            </div>
        </div>
    </div>
    <div class="container my-4 p-4 bg-white rounded shadow flex-grow-1 align-content-center">
        <div class="trash-display my-4">
            <div class="trash-container">
                <div class="lid"></div>
                <div class="rectangle">
                    <div class="lines">
                        <div class="line"></div>
                        <div class="line"></div>
                        <div class="line"></div>
                    </div>
                    <div class="fill" style="@Estado(Model.EstadoPlastico)"></div>
                </div>
            </div>
            <div class="trash-container">
                <div class="lid"></div>
                <div class="rectangle">
                    <div class="lines">
                        <div class="line"></div>
                        <div class="line"></div>
                        <div class="line"></div>
                    </div>
                    <div class="fill" style="@Estado(Model.EstadoMetal)"></div>
                </div>
            </div>
        </div>

        <div class="d-flex justify-content-center gap-3 mt-4">

            <!-- Vaciar contenedor 1 -->
            <form asp-action="VaciarContenedor" method="post">
                <input type="hidden" name="id" value="@Model.IdContenedorPlastico" />
                <input type="hidden" name="idIndex" value="@Model.ConjuntoId" />
                <button type="submit" class="btn btn-primary">Vaciar contenedor 1</button>
            </form>

            <!-- Vaciar ambos -->
            <form asp-action="VaciarAmbosContenedor" method="post">
                <input type="hidden" name="id1" value="@Model.IdContenedorPlastico" />
                <input type="hidden" name="id2" value="@Model.IdContenedorMetal" />
                <input type="hidden" name="idIndex" value="@Model.ConjuntoId" />
                <button type="submit" class="btn btn-primary">Vaciar ambos</button>
            </form>

            <!-- Vaciar contenedor 2 -->
            <form asp-action="VaciarContenedor" method="post">
                <input type="hidden" name="id" value="@Model.IdContenedorMetal" />
                <input type="hidden" name="idIndex" value="@Model.ConjuntoId" />
                <button type="submit" class="btn btn-primary">Vaciar contenedor 2</button>
            </form>

        </div>

    </div>


</div>

@section Scripts{
    <script>
              function setFillLevel(percentage) {
          const fills = document.querySelectorAll('.fill');
          fills.forEach(fill => {
            fill.style.height = percentage + '%';
          });

          }
        
    </script>
}